<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.acorn.doma.mapper.AdminMapper">

    <!-- 공지사항 목록 조회 -->
    <select id="getNotices" parameterType="Search" resultType="Admin">
        SELECT *
        FROM d_board
        WHERE div = '20'
        <if test="searchWord != null and searchWord != ''">
            AND title LIKE CONCAT('%', #{searchWord}, '%')
        </if>
        ORDER BY reg_dt DESC
    </select>

    <!-- 공지사항 등록 -->
    <insert id="insertNotice" parameterType="Admin">
        INSERT INTO d_board (seq, div, title, reg_id, content, img_link, reg_dt, mod_dt, views, gname)
        VALUES (#{seq}, '20', #{title}, #{regId}, #{content}, #{imgLink}, SYSDATE, SYSDATE, 0, #{gname})
    </insert>

    <!-- 공지사항 수정 -->
    <update id="updateNotice" parameterType="Admin">
        UPDATE d_board
        SET title = #{title},
            content = #{content},
            img_link = #{imgLink},
            mod_id = #{modId},
            mod_dt = SYSDATE
        WHERE seq = #{seq}
        AND div = '20'
    </update>

    <!-- 공지사항 삭제 -->
    <delete id="deleteNotice" parameterType="Admin">
        DELETE FROM d_board
        WHERE seq = #{seq}
        AND div = '20'
    </delete>

    <!-- 공지사항 단건 조회 -->
    <select id="getNotice" parameterType="Admin" resultType="Admin">
        SELECT *
        FROM d_board
        WHERE seq = #{seq}
        AND div = '20'
    </select>

</mapper>
